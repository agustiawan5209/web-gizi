import{r as h,b,j as a}from"./app-BUmC_SAY.js";import{e as v,C as L,a as N,L as w,f as D,g as M,p as E,c as C,d as F}from"./index-DNQZhv-b.js";import{L as P}from"./loader-circle-2Tulphst.js";import{B as A}from"./button-CUFfYuZr.js";import{a as R,c as $}from"./index-BWDtVl4a.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],T=R("Loader",S);function _(n){const[c,p]=h.useState(null),[u,i]=h.useState(!1),[f,l]=h.useState(null);return h.useEffect(()=>{n&&(async()=>{i(!0);try{const r=await b.get(n);p(r.data),l(null)}catch(r){l(r instanceof Error?r.message:"Terjadi kesalahan")}finally{i(!1)}})()},[n]),{data:c,loading:u,error:f}}L.register(N,w,D,M,E,C,F);const I=({url:n,title:c})=>{const{data:p,loading:u,error:i}=_(n),f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!!c,text:c}}};if(u)return a.jsx("div",{className:"flex justify-center py-4 text-center",children:a.jsx(P,{})});if(i)return a.jsx("div",{className:"py-4 text-center text-red-500",children:i});if(!p)return a.jsx("div",{className:"py-4 text-center",children:"Tidak ada data"});const l=e=>Array.isArray(e.datasets)?e:{labels:e.labels||[],datasets:Object.values(e.datasets).map((r,g)=>{const y=`${Math.floor(Math.random()*255)}, ${Math.floor(Math.random()*255)}, ${Math.floor(Math.random()*255)}`,m=`rgb(${y}, 0.8)`,k=`rgba(${y}, 0.2)`;return{label:r.label,data:r.data,borderColor:m,backgroundColor:k,tension:.1,yAxisID:"y"}})};try{const e=l(p);return!e.labels||!e.datasets||e.datasets.length===0?(console.error("Data chart tidak valid:",e),a.jsx("div",{className:"py-4 text-center",children:"Format data tidak valid"})):a.jsx("div",{className:"h-[400px] w-full",children:a.jsx(v,{options:f,data:e})})}catch(e){return console.error("Error rendering chart:",e),a.jsx("div",{className:"py-4 text-center text-red-500",children:"Gagal menampilkan chart"})}},O=({pdfUrl:n,fileName:c="document.pdf",buttonText:p="Download PDF",icon:u,className:i,onDownloadStart:f,onDownloadSuccess:l,onDownloadError:e})=>{const[r,g]=h.useState(!1),[y,m]=h.useState(null),k=async()=>{if(!n){const t="URL PDF tidak valid";m(t),e&&e(t);return}try{g(!0),m(null),f&&f();const t=await b.get(n,{responseType:"blob",headers:{Accept:"application/pdf"},validateStatus:x=>x===200}),s=t.headers["content-type"];if(!s||!s.includes("application/pdf")){const x="File yang diminta bukan PDF";m(x),e&&e(x);return}const o=new Blob([t.data],{type:"application/pdf"}),j=window.URL.createObjectURL(o),d=document.createElement("a");d.href=j,d.setAttribute("download",c),document.body.appendChild(d),d.click(),d.parentNode&&d.parentNode.removeChild(d),window.URL.revokeObjectURL(j),l&&l()}catch(t){let s="Gagal mengunduh dokumen PDF";if(b.isAxiosError(t)){const o=t;o.response?o.response.status===404?s="File PDF tidak ditemukan (404)":o.response.status===403?s="Akses ditolak (403)":s=`Error ${o.response.status}: ${o.response.statusText}`:o.request?s="Tidak ada respon dari server":s="Error dalam konfigurasi request"}else t instanceof Error&&(s=t.message);console.error("Error downloading PDF:",t),m(s),e&&e(s)}finally{g(!1)}};return a.jsxs("div",{className:"pdf-download-container",children:[a.jsx(A,{type:"button",variant:"default",onClick:k,disabled:r,className:$("pdf-download-button",i),"aria-label":"Download PDF document",children:r?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner"}),a.jsx(T,{className:" animate-spin"})]}):u||p}),y&&a.jsxs("div",{className:"pdf-download-error",children:[a.jsxs("p",{children:["Error: ",y]}),a.jsxs("p",{children:["URL: ",n]})]})]})};export{O as D,I as G};
