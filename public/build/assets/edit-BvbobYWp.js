import{r as n,m as S,j as e,L as y}from"./app-Ca6S9gPx.js";import{I as j}from"./input-error-BLE66GFl.js";import{B as I}from"./button-CCO4md11.js";import{a as k,I as _}from"./input-C1qhdXdl.js";import{L as D}from"./label-Dg5dztYo.js";import{S as E,a as A,b as B,c as M,d as P,f as R}from"./select-C-zkf5ug.js";import{T as V,a as F,b as $,c as b,d as v,e as G,f as c}from"./table-DnsXk7Tm.js";import{A as H}from"./app-layout-BMjI3x_B.js";import{L as U}from"./loader-circle-Db8hrPhh.js";import"./index-Cginlj2W.js";import"./index-dQZco9LH.js";import"./index-DRgnZxA1.js";import"./user-menu-content-BmaJqgo6.js";import"./log-out-KD-nKMhc.js";import"./index-DHvlJmdC.js";import"./chevron-down-D0RoRdGA.js";import"./dialog-BP221eZu.js";import"./index-BTOJCRsu.js";import"./app-logo-icon-kfJQAMcK.js";function de({breadcrumb:o,attribut:d,statusLabel:C,dataset:r}){const N=n.useMemo(()=>(o==null?void 0:o.map(a=>({title:a.title,href:a.href})))??[],[o]),L=n.useMemo(()=>({label:r.label,jenis_kelamin:r.jenis_kelamin,attribut:d.map(a=>{const s=r.fiturdataset.find(l=>l.attribut_id===a.id);return{nilai:s?s.nilai:"",attribut_id:a.id}})}),[d,r]),{data:i,setData:u,put:f,processing:p,errors:x}=S(L),T=n.useMemo(()=>d.filter(a=>!["status"].includes(a.nama.toLowerCase())),[d]),w=n.useCallback(a=>{a.preventDefault(),f(route("admin.dataset.update",{dataset:r.id}),{onError:s=>console.log(s)})},[f,r.id]),h=n.useCallback((a,s)=>{u("attribut",i.attribut.map((l,m)=>m===a?{...l,nilai:s}:l))},[i.attribut,u]);return e.jsxs(H,{breadcrumbs:N,children:[e.jsx(y,{title:"Edit Dataset"}),e.jsx("div",{className:"dark:bg-elevation-1 flex h-full flex-1 flex-col gap-4 rounded-xl p-1 lg:p-4",children:e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border md:min-h-min",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx("form",{className:"flex flex-col gap-6",onSubmit:w,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"label",children:"Label"}),e.jsxs(E,{value:i.label,onValueChange:a=>u("label",a),children:[e.jsx(A,{className:"text-foreground",children:e.jsx(B,{placeholder:"Data Status"})}),e.jsx(M,{children:e.jsx(P,{children:C.map(a=>e.jsx(R,{value:a,children:a},a))})})]}),e.jsx(j,{message:x.label})]}),e.jsx("div",{className:"block py-2",children:e.jsx(V,{children:e.jsxs(F,{children:[e.jsx($,{children:e.jsxs(b,{children:[e.jsx(v,{children:"Attribut"}),e.jsx(v,{children:"Input"})]})}),e.jsx(G,{children:T.map((a,s)=>{var l,m,g;return a.nama.toLowerCase().includes("jenis kelamin")?e.jsxs(b,{children:[e.jsx(c,{children:a.nama}),e.jsxs(c,{children:[e.jsxs("div",{className:"flex flex-row gap-2 p-2",children:[e.jsx(k,{id:"jenis1",name:"jenis_kelamin",label:"Laki-laki",value:"Laki-laki",checked:((l=i.attribut[s])==null?void 0:l.nilai)==="Laki-laki",onChange:t=>h(s,t.target.value),className:"border-red-500",labelClassName:"text-gray-800 dark:text-white"}),e.jsx(k,{id:"jenis2",name:"jenis_kelamin",label:"Perempuan",value:"Perempuan",checked:((m=i.attribut[s])==null?void 0:m.nilai)==="Perempuan",onChange:t=>h(s,t.target.value),className:"border-red-500",labelClassName:"text-gray-800 dark:text-white"})]}),e.jsx(j,{message:x.jenis_kelamin})]})]},a.id):e.jsxs(b,{children:[e.jsx(c,{children:a.nama}),e.jsxs(c,{children:[e.jsx(_,{type:"number",id:`attribut-${a.id}`,value:((g=i.attribut[s])==null?void 0:g.nilai)||"",disabled:p,onChange:t=>h(s,t.target.value)}),e.jsx(j,{message:x[`attribut.${s}.nilai`]})]})]},a.id)})})]})})}),e.jsxs(I,{type:"submit",variant:"secondary",className:"mt-2 w-full",tabIndex:5,disabled:p,children:[p&&e.jsx(U,{className:"mr-2 h-4 w-4 animate-spin"}),"Update"]})]})})})})})]})}export{de as default};
