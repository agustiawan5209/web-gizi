import{r as n,m as S,j as e,L as _}from"./app-BUmC_SAY.js";import{I as p}from"./input-error-BkwTxdJ-.js";import{B as D}from"./button-CUFfYuZr.js";import{I as v,a as k}from"./input-B2p-SIH9.js";import{L as N}from"./label-BitvWpER.js";import{S as E,a as A,b as F,c as B,d as M,f as P}from"./select-DjHtdmMn.js";import{T as R,a as V,b as $,c as b,d as C,e as q,f as x}from"./table-DwepDJH8.js";import{A as G}from"./app-layout-BtJ3pkAn.js";import{L as H}from"./loader-circle-2Tulphst.js";import"./index-BWDtVl4a.js";import"./index-B2njMRug.js";import"./index-DhEVpXcI.js";import"./user-menu-content-DOQ3YuFw.js";import"./log-out-B83i_Uwg.js";import"./index-BGohIGTa.js";import"./chevron-down-Ckj1FqUF.js";import"./dialog-Dmw-jHsy.js";import"./index-RsEnR-Iq.js";import"./app-logo-icon-vQaABjEB.js";function de({breadcrumb:o,attribut:d,statusLabel:y,dataset:s}){const L=n.useMemo(()=>(o==null?void 0:o.map(a=>({title:a.title,href:a.href})))??[],[o]),T=n.useMemo(()=>({tgl:s.tgl,label:s.label,jenis_kelamin:s.jenis_kelamin,attribut:d.map(a=>{const l=s.fiturdataset.find(t=>Number(t.attribut_id)===Number(a.id));return{nilai:l?l.nilai:"",attribut_id:a.id}})}),[d,s]),{data:r,setData:m,put:g,processing:h,errors:c}=S(T),w=n.useMemo(()=>d.filter(a=>!["status"].includes(a.nama.toLowerCase())),[d]),I=n.useCallback(a=>{a.preventDefault(),g(route("admin.dataset.update",{dataset:s.id}),{onError:l=>console.log(l)})},[g,s.id]),j=n.useCallback((a,l)=>{m("attribut",r.attribut.map((t,u)=>u===a?{...t,nilai:l}:t))},[r.attribut,m]);return e.jsxs(G,{breadcrumbs:L,children:[e.jsx(_,{title:"Edit Dataset"}),e.jsx("div",{className:"dark:bg-elevation-1 flex h-full flex-1 flex-col gap-4 rounded-xl p-1 lg:p-4",children:e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border md:min-h-min",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:I,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"tgl",children:"Tanggal"}),e.jsx(v,{id:"tgl",type:"date",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"tgl",value:r.tgl,onChange:a=>m("tgl",a.target.value),placeholder:"yyyy-mm-dd",className:"h-10"}),e.jsx(p,{message:c.tgl})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"label",children:"Label"}),e.jsxs(E,{value:r.label,onValueChange:a=>m("label",a),children:[e.jsx(A,{className:"text-foreground",children:e.jsx(F,{placeholder:"Data Status"})}),e.jsx(B,{children:e.jsx(M,{children:y.map(a=>e.jsx(P,{value:a,children:a},a))})})]}),e.jsx(p,{message:c.label})]}),e.jsx("div",{className:"block py-2",children:e.jsx(R,{children:e.jsxs(V,{children:[e.jsx($,{children:e.jsxs(b,{children:[e.jsx(C,{children:"Attribut"}),e.jsx(C,{children:"Input"})]})}),e.jsx(q,{children:w.map((a,l)=>{var t,u,f;return a.nama.toLowerCase().includes("jenis kelamin")?e.jsxs(b,{children:[e.jsx(x,{children:a.nama}),e.jsxs(x,{children:[e.jsxs("div",{className:"flex flex-row gap-2 p-2",children:[e.jsx(k,{id:"jenis1",name:"jenis_kelamin",label:"Laki-laki",value:"Laki-laki",checked:((t=r.attribut[l])==null?void 0:t.nilai)==="Laki-laki",onChange:i=>j(l,i.target.value),className:"border-red-500",labelClassName:"text-gray-800 dark:text-white"}),e.jsx(k,{id:"jenis2",name:"jenis_kelamin",label:"Perempuan",value:"Perempuan",checked:((u=r.attribut[l])==null?void 0:u.nilai)==="Perempuan",onChange:i=>j(l,i.target.value),className:"border-red-500",labelClassName:"text-gray-800 dark:text-white"})]}),e.jsx(p,{message:c.jenis_kelamin})]})]},a.id):e.jsxs(b,{children:[e.jsx(x,{children:a.nama}),e.jsxs(x,{children:[e.jsx(v,{type:"number",id:`attribut-${a.id}`,value:((f=r.attribut[l])==null?void 0:f.nilai)||"",disabled:h,onChange:i=>j(l,i.target.value)}),e.jsx(p,{message:c[`attribut.${l}.nilai`]})]})]},a.id)})})]})})}),e.jsxs(D,{type:"submit",variant:"secondary",className:"mt-2 w-full",tabIndex:5,disabled:h,children:[h&&e.jsx(H,{className:"mr-2 h-4 w-4 animate-spin"}),"Update"]})]})]})})})})]})}export{de as default};
