import{r,K as I,m as E,j as a,L as A}from"./app-BUmC_SAY.js";import{C as D}from"./classify-pemeriksaan-DjKwKP5p.js";import{I as P}from"./input-error-BkwTxdJ-.js";import{C as M,a as W}from"./card-C4H4K6oR.js";import{I as q}from"./input-B2p-SIH9.js";import{L as i}from"./label-BitvWpER.js";import{A as B}from"./app-layout-BtJ3pkAn.js";import"./button-CUFfYuZr.js";import"./index-BWDtVl4a.js";import"./dialog-Dmw-jHsy.js";import"./index-RsEnR-Iq.js";import"./index-DhEVpXcI.js";import"./user-menu-content-DOQ3YuFw.js";import"./index-B2njMRug.js";import"./log-out-B83i_Uwg.js";import"./table-DwepDJH8.js";import"./info-CzKtRuIx.js";import"./loader-circle-2Tulphst.js";import"./app-logo-icon-vQaABjEB.js";function na({breadcrumb:d,balita:g,attribut:u,orangtua:t}){const j=r.useMemo(()=>d?d.map(e=>({title:e.title,href:e.href})):[],[d]),{auth:F}=I().props,N=new Date().toISOString().split("T")[0],{data:_,setData:n,post:b,processing:v,errors:l}=E({orang_tua_id:"",nama:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",alamat:"",tanggal_pemeriksaan:N,attribut:u.map(e=>({nilai:null,attribut_id:e.id,name:e.nama})),label:"",alasan:"",rekomendasi:"",usia_balita:"",detail:[]}),T=e=>{e.preventDefault(),b(route("pemeriksaan.store"),{onError:s=>console.log(s)})},[o,k]=r.useState(null),[m,C]=r.useState(""),p=r.useCallback(e=>!(t!=null&&t.length)||!e?null:t.find(s=>s.id===e)??null,[t]),[O,w]=r.useState(""),[L,h]=r.useState([]),[S,c]=r.useState(!1),y=e=>{const s=e.target.value;if(w(s),s.length>2){const f=t.filter(x=>x.name.toLowerCase().includes(s.toLowerCase())||x.email.toLowerCase().includes(s.toLowerCase()));f.length>0?(h(f),c(!0),l.orang_tua_id=""):l.orang_tua_id="Nama Orang Tua/Wali Tidak Terdaftar"}else h([]),c(!1),l.orang_tua_id="Nama Orang Tua/Wali Tidak Terdaftar"};return r.useEffect(()=>{if(m){const e=p(m);k(e),e&&(c(!1),n("orang_tua_id",e.id),n("alamat",e.alamat))}},[m,p,n]),a.jsxs(B,{breadcrumbs:j,children:[a.jsx(A,{title:"Create"}),a.jsx("div",{className:"dark:bg-elevation-1 flex h-full flex-1 flex-col gap-4 rounded-xl p-1 lg:p-4",children:a.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border md:min-h-min",children:a.jsx(M,{children:a.jsxs(W,{children:[a.jsxs("div",{className:"grid gap-6",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(i,{htmlFor:"orang_tua",children:"Nama Orang Tua"}),a.jsxs("div",{className:"relative w-full p-2",children:[a.jsx(q,{type:"search",id:"orang_tua",placeholder:"cari berdasarkan nama atau email yang terdaftar",required:!0,value:O,onChange:e=>y(e)}),S&&a.jsx("div",{className:"absolute top-10 rounded-xl bg-white p-2 shadow-lg",children:a.jsx("ul",{children:L.map(e=>a.jsx("li",{onClick:()=>C(e.id),className:"cursor-pointer p-2 hover:bg-gray-200",children:e.name},e.id))})})]}),a.jsx(P,{message:l.orang_tua_id})]}),o&&a.jsxs("div",{className:"block space-y-4 rounded-lg border p-2",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(i,{className:"text-muted-foreground",children:["Nama Orang Tua/",a.jsx("i",{children:"Mewakili"}),":"]}),a.jsx(i,{className:"font-normal",children:o.name})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(i,{className:"text-muted-foreground",children:"Email Orang Tua:"}),a.jsx(i,{className:"font-normal",children:o.email})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(i,{className:"text-muted-foreground",children:"Alamat Orang Tua:"}),a.jsx(i,{className:"font-normal",children:o.alamat})]})]})]}),a.jsx(D,{data:_,setData:n,errors:l,processing:v,submit:T,attribut:u,orangtua:t,balita:g,canSubmit:!0})]})})})})]})}export{na as default};
